{"id":164,"date":"2021-04-23T22:27:56","date_gmt":"2021-04-23T16:57:56","guid":{"rendered":"https:\/\/vinayaroratech.com\/?p=164"},"modified":"2021-04-23T22:28:11","modified_gmt":"2021-04-23T16:58:11","slug":"how-to-reverse-proxy-using-nginx","status":"publish","type":"post","link":"https:\/\/vinayaroratech.com\/dotnet\/how-to\/how-to-reverse-proxy-using-nginx\/","title":{"rendered":"How to reverse proxy using NGINX"},"content":{"rendered":"\t\t<div data-elementor-type=\"wp-post\" data-elementor-id=\"164\" class=\"elementor elementor-164\" data-elementor-settings=\"[]\">\n\t\t\t\t\t\t<div class=\"elementor-inner\">\n\t\t\t\t\t\t\t<div class=\"elementor-section-wrap\">\n\t\t\t\t\t\t\t<section class=\"elementor-section elementor-top-section elementor-element elementor-element-4c99ce5 elementor-section-boxed elementor-section-height-default elementor-section-height-default\" data-id=\"4c99ce5\" data-element_type=\"section\">\n\t\t\t\t\t\t<div class=\"elementor-container elementor-column-gap-default\">\n\t\t\t\t\t\t\t<div class=\"elementor-row\">\n\t\t\t\t\t<div class=\"elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-75b3b33\" data-id=\"75b3b33\" data-element_type=\"column\">\n\t\t\t<div class=\"elementor-column-wrap elementor-element-populated\">\n\t\t\t\t\t\t\t<div class=\"elementor-widget-wrap\">\n\t\t\t\t\t\t<div class=\"elementor-element elementor-element-661196b elementor-widget elementor-widget-heading\" data-id=\"661196b\" data-element_type=\"widget\" data-widget_type=\"heading.default\">\n\t\t\t\t<div class=\"elementor-widget-container\">\n\t\t\t<h2 class=\"elementor-heading-title elementor-size-default\">Introduction<\/h2>\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/section>\n\t\t\t\t<section class=\"elementor-section elementor-top-section elementor-element elementor-element-50f78ce elementor-section-boxed elementor-section-height-default elementor-section-height-default\" data-id=\"50f78ce\" data-element_type=\"section\">\n\t\t\t\t\t\t<div class=\"elementor-container elementor-column-gap-default\">\n\t\t\t\t\t\t\t<div class=\"elementor-row\">\n\t\t\t\t\t<div class=\"elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-49c23a0\" data-id=\"49c23a0\" data-element_type=\"column\">\n\t\t\t<div class=\"elementor-column-wrap elementor-element-populated\">\n\t\t\t\t\t\t\t<div class=\"elementor-widget-wrap\">\n\t\t\t\t\t\t<div class=\"elementor-element elementor-element-08912a2 elementor-widget elementor-widget-text-editor\" data-id=\"08912a2\" data-element_type=\"widget\" data-widget_type=\"text-editor.default\">\n\t\t\t\t<div class=\"elementor-widget-container\">\n\t\t\t\t\t\t\t\t<div class=\"elementor-text-editor elementor-clearfix\">\n\t\t\t\t<p>Nginx is one of the most popular web servers in the world and is responsible for hosting some of the largest and highest-traffic sites on the internet. It is more resource-friendly than Apache in most cases and can be used as a web server or reverse proxy.<\/p>\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/section>\n\t\t\t\t<section class=\"elementor-section elementor-top-section elementor-element elementor-element-f74209b elementor-section-boxed elementor-section-height-default elementor-section-height-default\" data-id=\"f74209b\" data-element_type=\"section\">\n\t\t\t\t\t\t<div class=\"elementor-container elementor-column-gap-default\">\n\t\t\t\t\t\t\t<div class=\"elementor-row\">\n\t\t\t\t\t<div class=\"elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-cd2d0b7\" data-id=\"cd2d0b7\" data-element_type=\"column\">\n\t\t\t<div class=\"elementor-column-wrap elementor-element-populated\">\n\t\t\t\t\t\t\t<div class=\"elementor-widget-wrap\">\n\t\t\t\t\t\t<div class=\"elementor-element elementor-element-42b688f elementor-widget elementor-widget-text-editor\" data-id=\"42b688f\" data-element_type=\"widget\" data-widget_type=\"text-editor.default\">\n\t\t\t\t<div class=\"elementor-widget-container\">\n\t\t\t\t\t\t\t\t<div class=\"elementor-text-editor elementor-clearfix\">\n\t\t\t\t<p>This article describes <span style=\"color: var( --e-global-color-text ); font-family: var( --e-global-typography-text-font-family ), Sans-serif; font-weight: var( --e-global-typography-text-font-weight );\">the basic configuration of a proxy server. You will learn how to pass a request from NGINX to proxied servers over different protocols, modify client request headers that are sent to the proxied server, and configure buffering of responses coming from the proxied servers.<\/span><\/p>\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/section>\n\t\t\t\t<section class=\"elementor-section elementor-top-section elementor-element elementor-element-b1b249d elementor-section-boxed elementor-section-height-default elementor-section-height-default\" data-id=\"b1b249d\" data-element_type=\"section\">\n\t\t\t\t\t\t<div class=\"elementor-container elementor-column-gap-default\">\n\t\t\t\t\t\t\t<div class=\"elementor-row\">\n\t\t\t\t\t<div class=\"elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-9e47b6a\" data-id=\"9e47b6a\" data-element_type=\"column\">\n\t\t\t<div class=\"elementor-column-wrap elementor-element-populated\">\n\t\t\t\t\t\t\t<div class=\"elementor-widget-wrap\">\n\t\t\t\t\t\t<div class=\"elementor-element elementor-element-451790d elementor-widget elementor-widget-text-editor\" data-id=\"451790d\" data-element_type=\"widget\" data-widget_type=\"text-editor.default\">\n\t\t\t\t<div class=\"elementor-widget-container\">\n\t\t\t\t\t\t\t\t<div class=\"elementor-text-editor elementor-clearfix\">\n\t\t\t\t<p>When hosting our web applications, we often have one public IP address (i.e., an IP address visible to the outside world) using which we want to host multiple web apps. For example, one may wants to host three different web apps respectively for <em>example1.com<\/em>, <i>example2.com<\/i>, and <i>example1.com\/images<\/i> on the same machine using a single IP address.<\/p>\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/section>\n\t\t\t\t<section class=\"elementor-section elementor-top-section elementor-element elementor-element-2119321 elementor-section-boxed elementor-section-height-default elementor-section-height-default\" data-id=\"2119321\" data-element_type=\"section\">\n\t\t\t\t\t\t<div class=\"elementor-container elementor-column-gap-default\">\n\t\t\t\t\t\t\t<div class=\"elementor-row\">\n\t\t\t\t\t<div class=\"elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-d4f9079\" data-id=\"d4f9079\" data-element_type=\"column\">\n\t\t\t<div class=\"elementor-column-wrap elementor-element-populated\">\n\t\t\t\t\t\t\t<div class=\"elementor-widget-wrap\">\n\t\t\t\t\t\t<div class=\"elementor-element elementor-element-55765d4 elementor-widget elementor-widget-text-editor\" data-id=\"55765d4\" data-element_type=\"widget\" data-widget_type=\"text-editor.default\">\n\t\t\t\t<div class=\"elementor-widget-container\">\n\t\t\t\t\t\t\t\t<div class=\"elementor-text-editor elementor-clearfix\">\n\t\t\t\t<p><strong>How can we do that?<\/strong>\u00a0Well, the good news is Internet browsers send the domain name inside HTTP requests and all we need to do is to parse the requested domain name and URL and then route the HTTP request to the actual web server.<\/p>\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/section>\n\t\t\t\t<section class=\"elementor-section elementor-top-section elementor-element elementor-element-2876da4 elementor-section-boxed elementor-section-height-default elementor-section-height-default\" data-id=\"2876da4\" data-element_type=\"section\">\n\t\t\t\t\t\t<div class=\"elementor-container elementor-column-gap-default\">\n\t\t\t\t\t\t\t<div class=\"elementor-row\">\n\t\t\t\t\t<div class=\"elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-3700c07\" data-id=\"3700c07\" data-element_type=\"column\">\n\t\t\t<div class=\"elementor-column-wrap elementor-element-populated\">\n\t\t\t\t\t\t\t<div class=\"elementor-widget-wrap\">\n\t\t\t\t\t\t<div class=\"elementor-element elementor-element-f56a65d elementor-widget elementor-widget-text-editor\" data-id=\"f56a65d\" data-element_type=\"widget\" data-widget_type=\"text-editor.default\">\n\t\t\t\t<div class=\"elementor-widget-container\">\n\t\t\t\t\t\t\t\t<div class=\"elementor-text-editor elementor-clearfix\">\n\t\t\t\t<p><strong>Oh, do I really need to parse HTTP requests?<\/strong>\u00a0You can if you really want to, but there are lots of tools and technologies that readily do this for you. In this tutorial, we walk you through how you can use nginx to\u00a0<em>proxy<\/em>\u00a0multiple web applications.<\/p>\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/section>\n\t\t\t\t<section class=\"elementor-section elementor-top-section elementor-element elementor-element-c58e2ea elementor-section-boxed elementor-section-height-default elementor-section-height-default\" data-id=\"c58e2ea\" data-element_type=\"section\">\n\t\t\t\t\t\t<div class=\"elementor-container elementor-column-gap-default\">\n\t\t\t\t\t\t\t<div class=\"elementor-row\">\n\t\t\t\t\t<div class=\"elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-758d716\" data-id=\"758d716\" data-element_type=\"column\">\n\t\t\t<div class=\"elementor-column-wrap elementor-element-populated\">\n\t\t\t\t\t\t\t<div class=\"elementor-widget-wrap\">\n\t\t\t\t\t\t<div class=\"elementor-element elementor-element-fce5029 elementor-widget elementor-widget-heading\" data-id=\"fce5029\" data-element_type=\"widget\" data-widget_type=\"heading.default\">\n\t\t\t\t<div class=\"elementor-widget-container\">\n\t\t\t<h2 class=\"elementor-heading-title elementor-size-default\">Configuration<\/h2>\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/section>\n\t\t\t\t<section class=\"elementor-section elementor-top-section elementor-element elementor-element-090cdd0 elementor-section-boxed elementor-section-height-default elementor-section-height-default\" data-id=\"090cdd0\" data-element_type=\"section\">\n\t\t\t\t\t\t<div class=\"elementor-container elementor-column-gap-default\">\n\t\t\t\t\t\t\t<div class=\"elementor-row\">\n\t\t\t\t\t<div class=\"elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-ca87859\" data-id=\"ca87859\" data-element_type=\"column\">\n\t\t\t<div class=\"elementor-column-wrap elementor-element-populated\">\n\t\t\t\t\t\t\t<div class=\"elementor-widget-wrap\">\n\t\t\t\t\t\t<div class=\"elementor-element elementor-element-0d3a5b9 elementor-widget elementor-widget-text-editor\" data-id=\"0d3a5b9\" data-element_type=\"widget\" data-widget_type=\"text-editor.default\">\n\t\t\t\t<div class=\"elementor-widget-container\">\n\t\t\t\t\t\t\t\t<div class=\"elementor-text-editor elementor-clearfix\">\n\t\t\t\t<h3 class=\"elementor-heading-title elementor-size-default elementor-inline-editing pen\" contenteditable=\"true\" data-elementor-setting-key=\"title\" data-pen-placeholder=\"Type Here...\">Step 1 &#8212; Booting Servers for Virtual Hosts\u200b<\/h3><p>Write three different node applications running on different ports (say 8080, 8181, 8282) on your machine.<\/p>\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/section>\n\t\t\t\t<section class=\"elementor-section elementor-top-section elementor-element elementor-element-9ab7194 elementor-section-boxed elementor-section-height-default elementor-section-height-default\" data-id=\"9ab7194\" data-element_type=\"section\">\n\t\t\t\t\t\t<div class=\"elementor-container elementor-column-gap-default\">\n\t\t\t\t\t\t\t<div class=\"elementor-row\">\n\t\t\t\t\t<div class=\"elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-68e5e99\" data-id=\"68e5e99\" data-element_type=\"column\">\n\t\t\t<div class=\"elementor-column-wrap elementor-element-populated\">\n\t\t\t\t\t\t\t<div class=\"elementor-widget-wrap\">\n\t\t\t\t\t\t<div class=\"elementor-element elementor-element-45405f6 elementor-widget elementor-widget-text-editor\" data-id=\"45405f6\" data-element_type=\"widget\" data-widget_type=\"text-editor.default\">\n\t\t\t\t<div class=\"elementor-widget-container\">\n\t\t\t\t\t\t\t\t<div class=\"elementor-text-editor elementor-clearfix\">\n\t\t\t\t<h3 class=\"elementor-heading-title elementor-size-default elementor-inline-editing pen\" contenteditable=\"true\" data-elementor-setting-key=\"title\" data-pen-placeholder=\"Type Here...\">Step 2 &#8212; Configure nginx&#8217;s Port<\/h3><p>To do so, you need to edit your\u00a0<code>nginx<\/code>\u00a0config file.<\/p><p>In the config file, find the\u00a0<code>server<\/code>\u00a0section:<\/p><pre><code>server {\n    listen       80;\n    ...\n    location \/ {\n       ...\n    }\n    ...\n}\n<\/code><\/pre><p><strong>If you&#8217;re using CDF<\/strong>, make sure you change\u00a0<code>80<\/code>\u00a0to a vacant port number (ask for one from your instructor). If not, you can keep using\u00a0<code>80<\/code>\u00a0or change the port if you will.<\/p><p><strong>Test nginx<\/strong><\/p><ol><li>Run\u00a0<code>.\/nginx<\/code>\u00a0on CDF, or run\u00a0<code>sudo nginx<\/code>\u00a0on your local machine.<\/li><li>Open the browser and log on to\u00a0<code>localhost:$PORT<\/code>\u00a0(replace\u00a0<code>$PORT<\/code>\u00a0with the port number you configured for\u00a0<code>nginx<\/code>).<\/li><\/ol>\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/section>\n\t\t\t\t<section class=\"elementor-section elementor-top-section elementor-element elementor-element-877cc04 elementor-section-boxed elementor-section-height-default elementor-section-height-default\" data-id=\"877cc04\" data-element_type=\"section\">\n\t\t\t\t\t\t<div class=\"elementor-container elementor-column-gap-default\">\n\t\t\t\t\t\t\t<div class=\"elementor-row\">\n\t\t\t\t\t<div class=\"elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-9e8e495\" data-id=\"9e8e495\" data-element_type=\"column\">\n\t\t\t<div class=\"elementor-column-wrap elementor-element-populated\">\n\t\t\t\t\t\t\t<div class=\"elementor-widget-wrap\">\n\t\t\t\t\t\t<div class=\"elementor-element elementor-element-c55d29b elementor-widget elementor-widget-text-editor\" data-id=\"c55d29b\" data-element_type=\"widget\" data-widget_type=\"text-editor.default\">\n\t\t\t\t<div class=\"elementor-widget-container\">\n\t\t\t\t\t\t\t\t<div class=\"elementor-text-editor elementor-clearfix\">\n\t\t\t\t<h3>Step 3 &#8212; Configure \/<\/h3><p>Let say we want to configure\u00a0<code>nginx<\/code>\u00a0to route requests for\u00a0<code>\/<\/code>,\u00a0<code>\/blog<\/code>, and\u00a0<code>\/mail<\/code>, respectively onto\u00a0<code>localhost:8080<\/code>,\u00a0<code>localhost:8181<\/code>, and\u00a0<code>localhost:8282<\/code>.<\/p><pre><code>                  +--- host --------&gt; node.js on localhost:8080\n                  |\nusers --&gt; nginx --|--- host\/blog ---&gt; node.js on localhost:8181\n                  |\n                  +--- host\/mail ---&gt; node.js on localhost:8282\n<\/code><\/pre><p>To route\u00a0<code>\/<\/code>, you need to edit your\u00a0<code>nginx<\/code>\u00a0config file.<\/p><p>In the config file, find the\u00a0<code>server<\/code>\u00a0section:<\/p><pre><code>server {\n    listen       80;\n    ...\n    location \/ {\n       ...\n    }\n    ...\n}\n<\/code><\/pre><p>This section is simply telling\u00a0<code>nginx<\/code>\u00a0how it should serve HTTP requests.<\/p><p>Now, change the location section to this snippet:<\/p><pre><code>server {\n    listen       ...;\n    ...\n    location \/ {\n        proxy_pass http:\/\/127.0.0.1:8080;\n    }\n    ...\n}\n<\/code><\/pre><p><code>proxy_pass<\/code>\u00a0simply tells\u00a0<code>nginx<\/code>\u00a0to forward requests to\u00a0<code>\/<\/code>\u00a0to the server listening on\u00a0<code>http:\/\/127.0.0.1:8080<\/code>.<\/p>\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/section>\n\t\t\t\t<section class=\"elementor-section elementor-top-section elementor-element elementor-element-aff6022 elementor-section-boxed elementor-section-height-default elementor-section-height-default\" data-id=\"aff6022\" data-element_type=\"section\">\n\t\t\t\t\t\t<div class=\"elementor-container elementor-column-gap-default\">\n\t\t\t\t\t\t\t<div class=\"elementor-row\">\n\t\t\t\t\t<div class=\"elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-ef2b5fa\" data-id=\"ef2b5fa\" data-element_type=\"column\">\n\t\t\t<div class=\"elementor-column-wrap elementor-element-populated\">\n\t\t\t\t\t\t\t<div class=\"elementor-widget-wrap\">\n\t\t\t\t\t\t<div class=\"elementor-element elementor-element-5f29003 elementor-widget elementor-widget-text-editor\" data-id=\"5f29003\" data-element_type=\"widget\" data-widget_type=\"text-editor.default\">\n\t\t\t\t<div class=\"elementor-widget-container\">\n\t\t\t\t\t\t\t\t<div class=\"elementor-text-editor elementor-clearfix\">\n\t\t\t\t<h3>Step 4 &#8212; Reload nginx&#8217;s Configuration<\/h3><p>To reload\u00a0<code>nginx<\/code>&#8216;s configuration run:\u00a0<code>nginx -s reload<\/code>\u00a0on your machine.<\/p><p>Referesh your browser.\u00a0<em>Do you see the output from your\u00a0<code>node.js<\/code>\u00a0application?<\/em>\u00a0If yes, you are all set. If no, there is a problem with your config.<\/p>\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/section>\n\t\t\t\t<section class=\"elementor-section elementor-top-section elementor-element elementor-element-8a65f23 elementor-section-boxed elementor-section-height-default elementor-section-height-default\" data-id=\"8a65f23\" data-element_type=\"section\">\n\t\t\t\t\t\t<div class=\"elementor-container elementor-column-gap-default\">\n\t\t\t\t\t\t\t<div class=\"elementor-row\">\n\t\t\t\t\t<div class=\"elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-cfb00ff\" data-id=\"cfb00ff\" data-element_type=\"column\">\n\t\t\t<div class=\"elementor-column-wrap elementor-element-populated\">\n\t\t\t\t\t\t\t<div class=\"elementor-widget-wrap\">\n\t\t\t\t\t\t<div class=\"elementor-element elementor-element-1adfdab elementor-widget elementor-widget-text-editor\" data-id=\"1adfdab\" data-element_type=\"widget\" data-widget_type=\"text-editor.default\">\n\t\t\t\t<div class=\"elementor-widget-container\">\n\t\t\t\t\t\t\t\t<div class=\"elementor-text-editor elementor-clearfix\">\n\t\t\t\t<h3>Step 5 &#8212; Add \/blog and \/mail<\/h3><p>To redirect\u00a0<code>\/mail<\/code>\u00a0and\u00a0<code>\/blog<\/code>, you simply need to add new entries the location section in the config file:<\/p><pre><code>server {\n    listen       ...;\n    ...\n    location \/ {\n        proxy_pass http:\/\/127.0.0.1:8080;\n    }\n    \n    location \/blog {\n        proxy_pass http:\/\/127.0.0.1:8181;\n    }\n\n    location \/mail {\n        proxy_pass http:\/\/127.0.0.1:8282;\n    }\n    ...\n}<\/code><\/pre>\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/section>\n\t\t\t\t<section class=\"elementor-section elementor-top-section elementor-element elementor-element-fdcde13 elementor-section-boxed elementor-section-height-default elementor-section-height-default\" data-id=\"fdcde13\" data-element_type=\"section\">\n\t\t\t\t\t\t<div class=\"elementor-container elementor-column-gap-default\">\n\t\t\t\t\t\t\t<div class=\"elementor-row\">\n\t\t\t\t\t<div class=\"elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-90f89c2\" data-id=\"90f89c2\" data-element_type=\"column\">\n\t\t\t<div class=\"elementor-column-wrap elementor-element-populated\">\n\t\t\t\t\t\t\t<div class=\"elementor-widget-wrap\">\n\t\t\t\t\t\t<div class=\"elementor-element elementor-element-8e7473c elementor-widget elementor-widget-text-editor\" data-id=\"8e7473c\" data-element_type=\"widget\" data-widget_type=\"text-editor.default\">\n\t\t\t\t<div class=\"elementor-widget-container\">\n\t\t\t\t\t\t\t\t<div class=\"elementor-text-editor elementor-clearfix\">\n\t\t\t\t<h3>Step 6 &#8212; Reload Your nginx Configuration<\/h3><p>Run\u00a0<code>nginx -s reload<\/code>\u00a0on your machine.<\/p><p>Log onto\u00a0<code>localhost:$PORT\/blog<\/code>\u00a0in your browser.\u00a0<em>Do you see the output from your second\u00a0<code>node.js<\/code>\u00a0application?<\/em><\/p><p>Then log onto\u00a0<code>localhost:$PORT\/mail<\/code>.\u00a0<em>Do you see the output from your third\u00a0<code>node.js<\/code>\u00a0application?<\/em><\/p><p>If yes &amp; yes, you are all set. If no, there is a problem with your config.<\/p>\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/section>\n\t\t\t\t<section class=\"elementor-section elementor-top-section elementor-element elementor-element-e5be034 elementor-section-boxed elementor-section-height-default elementor-section-height-default\" data-id=\"e5be034\" data-element_type=\"section\">\n\t\t\t\t\t\t<div class=\"elementor-container elementor-column-gap-default\">\n\t\t\t\t\t\t\t<div class=\"elementor-row\">\n\t\t\t\t\t<div class=\"elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-d511c56\" data-id=\"d511c56\" data-element_type=\"column\">\n\t\t\t<div class=\"elementor-column-wrap elementor-element-populated\">\n\t\t\t\t\t\t\t<div class=\"elementor-widget-wrap\">\n\t\t\t\t\t\t<div class=\"elementor-element elementor-element-32b0bc0 elementor-widget elementor-widget-text-editor\" data-id=\"32b0bc0\" data-element_type=\"widget\" data-widget_type=\"text-editor.default\">\n\t\t\t\t<div class=\"elementor-widget-container\">\n\t\t\t\t\t\t\t\t<div class=\"elementor-text-editor elementor-clearfix\">\n\t\t\t\t<h3>Step 7 &#8212; Rewriting Requests<\/h3><p>Now as you might have noticed in Step 6, nginx sends the same HTTP request to your\u00a0<code>node.js<\/code>\u00a0web apps which results into a 404 error. Why? Because, your\u00a0<code>node.js<\/code>\u00a0web application serves requests from\u00a0<code>\/<\/code>\u00a0not from\u00a0<code>\/blog<\/code>\u00a0and\u00a0<code>\/mail<\/code>. But,\u00a0<code>nginx<\/code>\u00a0is sending requests to\u00a0<code>\/blog<\/code>\u00a0and\u00a0<code>\/mail<\/code>.<\/p><p>To fix this issue, we need rewrite the URL so that it matches the URL you can serve on your\u00a0<code>node.js<\/code>\u00a0applications.<\/p><p>To correctly rewrite URLs change your config file to match the following snippet:<\/p><pre><code>server {\n    listen       ...;\n    ...\n    location \/ {\n        proxy_pass http:\/\/127.0.0.1:8080;\n    }\n    \n    location \/blog {\n        rewrite ^\/blog(.*) \/$1 break;\n        proxy_pass http:\/\/127.0.0.1:8181;\n    }\n\n    location \/mail {\n        rewrite ^\/mail(.*) \/$1 break;\n        proxy_pass http:\/\/127.0.0.1:8282;\n    }\n    ...\n}\n<\/code><\/pre><p>This rewrite commands are simple regular expressions that transform strings like\u00a0<code>\/blogWHAT_EVER<\/code>\u00a0and\u00a0<code>\/mailWHAT_EVER<\/code>\u00a0to\u00a0<code>\/WHAT_EVER<\/code>\u00a0in the HTTP requests.<\/p>\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/section>\n\t\t\t\t<section class=\"elementor-section elementor-top-section elementor-element elementor-element-ca84ecf elementor-section-boxed elementor-section-height-default elementor-section-height-default\" data-id=\"ca84ecf\" data-element_type=\"section\">\n\t\t\t\t\t\t<div class=\"elementor-container elementor-column-gap-default\">\n\t\t\t\t\t\t\t<div class=\"elementor-row\">\n\t\t\t\t\t<div class=\"elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-c34d035\" data-id=\"c34d035\" data-element_type=\"column\">\n\t\t\t<div class=\"elementor-column-wrap elementor-element-populated\">\n\t\t\t\t\t\t\t<div class=\"elementor-widget-wrap\">\n\t\t\t\t\t\t<div class=\"elementor-element elementor-element-b928976 elementor-widget elementor-widget-text-editor\" data-id=\"b928976\" data-element_type=\"widget\" data-widget_type=\"text-editor.default\">\n\t\t\t\t<div class=\"elementor-widget-container\">\n\t\t\t\t\t\t\t\t<div class=\"elementor-text-editor elementor-clearfix\">\n\t\t\t\t<h3>Step 8 &#8212; Reload and Test.<\/h3><p>All set?<\/p><h3><a id=\"user-content-exercise-1\" class=\"anchor\" href=\"https:\/\/gist.github.com\/soheilhy\/8b94347ff8336d971ad0#exercise-1\" aria-hidden=\"true\"><\/a>Exercise 1<\/h3><p>Configure your nginx to redirect URLs from\u00a0<code>\/google<\/code>\u00a0to\u00a0<code>http:\/\/www.google.com<\/code><\/p>\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/section>\n\t\t\t\t<section class=\"elementor-section elementor-top-section elementor-element elementor-element-5a2e9f1 elementor-section-boxed elementor-section-height-default elementor-section-height-default\" data-id=\"5a2e9f1\" data-element_type=\"section\">\n\t\t\t\t\t\t<div class=\"elementor-container elementor-column-gap-default\">\n\t\t\t\t\t\t\t<div class=\"elementor-row\">\n\t\t\t\t\t<div class=\"elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-70a5b1f\" data-id=\"70a5b1f\" data-element_type=\"column\">\n\t\t\t<div class=\"elementor-column-wrap elementor-element-populated\">\n\t\t\t\t\t\t\t<div class=\"elementor-widget-wrap\">\n\t\t\t\t\t\t<div class=\"elementor-element elementor-element-782e7aa elementor-widget elementor-widget-text-editor\" data-id=\"782e7aa\" data-element_type=\"widget\" data-widget_type=\"text-editor.default\">\n\t\t\t\t<div class=\"elementor-widget-container\">\n\t\t\t\t\t\t\t\t<div class=\"elementor-text-editor elementor-clearfix\">\n\t\t\t\t<h3>Step 9 (optional) &#8212; Redirecting Based on Host Name<\/h3><p>Let say you want to host\u00a0<code>example1.com<\/code>,\u00a0<code>example2.com<\/code>, and\u00a0<code>example3.com<\/code>\u00a0on your machine, respectively to\u00a0<code>localhost:8080<\/code>,\u00a0<code>localhost:8181<\/code>, and\u00a0<code>localhost:8282<\/code>.<\/p><p><strong>Note:<\/strong>\u00a0Since you don&#8217;t have access to a DNS server, you should add domain name entries to your\u00a0<code>\/etc\/hosts<\/code>\u00a0(you can&#8217;t do this on CDF machines):<\/p><pre><code>...\n127.0.0.1 example1.com example2.com example3.com\n...\n<\/code><\/pre><p>To proxy\u00a0<code>eaxmple1.com<\/code>\u00a0we can&#8217;t use the location part of the default server. Instead we need to add another server section with a\u00a0<code>server_name<\/code>\u00a0set to our virtual host (e.g.,\u00a0<code>example1.com<\/code>, &#8230;), and then a simple location section that tells\u00a0<code>nginx<\/code>\u00a0how to proxy the requests:<\/p><pre><code>server {\n    listen       80;\n    server_name  example1.com;\n\n    location \/ {\n        proxy_pass http:\/\/127.0.0.1:8080;\n    }\n}\n\nserver {\n    listen       80;\n    server_name  example2.com;\n\n    location \/ {\n        proxy_pass http:\/\/127.0.0.1:8181;\n    }\n}\n\nserver {\n    listen       80;\n    server_name  example3.com;\n\n    location \/ {\n        proxy_pass http:\/\/127.0.0.1:8282;\n    }\n}<\/code><\/pre>\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t<\/section>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t","protected":false},"excerpt":{"rendered":"<p>Introduction Nginx is one of the most popular web servers in the world and is responsible for hosting some of the largest and highest-traffic sites on the internet. It is more resource-friendly than Apache in most cases and can be used as a web server or reverse proxy. This article describes the basic configuration of &hellip;<\/p>\n<p class=\"read-more\"> <a class=\"\" href=\"https:\/\/vinayaroratech.com\/dotnet\/how-to\/how-to-reverse-proxy-using-nginx\/\"> <span class=\"screen-reader-text\">How to reverse proxy using NGINX<\/span> Read More &raquo;<\/a><\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[13],"tags":[],"_links":{"self":[{"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/posts\/164"}],"collection":[{"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/comments?post=164"}],"version-history":[{"count":3,"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/posts\/164\/revisions"}],"predecessor-version":[{"id":167,"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/posts\/164\/revisions\/167"}],"wp:attachment":[{"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/media?parent=164"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/categories?post=164"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/tags?post=164"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}