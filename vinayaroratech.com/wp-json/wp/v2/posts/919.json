{"id":919,"date":"2022-11-23T10:49:15","date_gmt":"2022-11-23T05:19:15","guid":{"rendered":"https:\/\/vinayaroratech.com\/?p=919"},"modified":"2022-11-23T10:49:58","modified_gmt":"2022-11-23T05:19:58","slug":"aws-cognito-client-credentials-flow-net-6","status":"publish","type":"post","link":"https:\/\/vinayaroratech.com\/dotnet\/aws-cognito-client-credentials-flow-net-6\/","title":{"rendered":"AWS Cognito \u2014 Client credentials flow .NET 6"},"content":{"rendered":"\n<h2>AWS Cognito User pool creation<\/h2>\n\n\n\n<p>Navigate to the AWS Cognito service page<\/p>\n\n\n\n<p>Click on create user pool<\/p>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--Q7BE8SnM--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/xowsh1tb5fw7v21vcwvt.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--Q7BE8SnM--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/xowsh1tb5fw7v21vcwvt.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<h3>Step 1:&nbsp;<strong>Configure sign-in experience<\/strong><\/h3>\n\n\n\n<p>Select Email and click next<\/p>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--djjpUzj6--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/0dyfbjftcb4gkhn4spho.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--djjpUzj6--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/0dyfbjftcb4gkhn4spho.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<h3>Step 2:&nbsp;<strong>Configure security requirements<\/strong><\/h3>\n\n\n\n<ul><li>Under password policy select cognito defaults<\/li><li>Under Multi-factor authentication select No MFA<\/li><li>Under User account recovery select Enable self-service account recovery and then Email Only<\/li><li>Click next<\/li><\/ul>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--nSiWrZa5--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/fg1utqde501f2nswe5ay.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--nSiWrZa5--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/fg1utqde501f2nswe5ay.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--qcDVjApk--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/oy8cez01twtbaenhaqe0.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--qcDVjApk--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/oy8cez01twtbaenhaqe0.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--20XQoxbI--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/568k0gdjf2ryhmk6g6t8.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--20XQoxbI--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/568k0gdjf2ryhmk6g6t8.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<h3>Step 3: Configure sign-up experience<\/h3>\n\n\n\n<p>Keep all selections as default and click next<\/p>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--ze1nTPQN--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/11tq51nygov0j0ymqiuh.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--ze1nTPQN--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/11tq51nygov0j0ymqiuh.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--y3DmrFS5--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/w0b4fr89xuxlqrndfe47.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--y3DmrFS5--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/w0b4fr89xuxlqrndfe47.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<h3>Step 4:&nbsp;<strong>Configure message delivery<\/strong><\/h3>\n\n\n\n<p>Select Send email with Cognito and keep the rest of the configuration as default then click next<\/p>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--oxXEqCX6--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/w0k59cwdphbe9zdln3wg.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--oxXEqCX6--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/w0k59cwdphbe9zdln3wg.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<h3>Step 5:&nbsp;<strong>Integrate your app<\/strong><\/h3>\n\n\n\n<ul><li>Configure the User pool name with your preferred naming convention<\/li><li>Select Confidential client<\/li><li>Configure the App client name<\/li><li>Click next<\/li><\/ul>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--oU2toiqE--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/k9vgz9af4a6v0wdf1v32.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--oU2toiqE--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/k9vgz9af4a6v0wdf1v32.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--dig7uTY_--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/f3gpmgqg25e4c2c7nbij.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--dig7uTY_--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/f3gpmgqg25e4c2c7nbij.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<h3>Step 6:&nbsp;<strong>Review and create<\/strong><\/h3>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--HSQnvkjY--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/r5sal74yfrgg0v17e9gm.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--HSQnvkjY--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/r5sal74yfrgg0v17e9gm.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--zfmQg-gE--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/25zene72ftbvl71nbizu.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--zfmQg-gE--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/25zene72ftbvl71nbizu.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--f00EfRMO--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/cklblx87a4y48fujm7t2.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--f00EfRMO--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/cklblx87a4y48fujm7t2.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--gaxwyVRv--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/uromd0g6hk29qml9cdrm.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--gaxwyVRv--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/uromd0g6hk29qml9cdrm.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<ul><li>Review your configuration<\/li><li>Click Create user pool<\/li><\/ul>\n\n\n\n<h3>User Pools<\/h3>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--BSROB40N--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/l56ru5xu2zi969tovlug.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--BSROB40N--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/l56ru5xu2zi969tovlug.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<p>See your created user pool<\/p>\n\n\n\n<h2>Application configuration and resource server creation<\/h2>\n\n\n\n<p>Navigate to your created user pool<\/p>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--p7s1lseQ--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/0vvq76ipc8qajnvlr2ru.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--p7s1lseQ--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/0vvq76ipc8qajnvlr2ru.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<p>Navigate to the App Integration tab<\/p>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--4_qn4aa5--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/14vpqzmqpfehciszazts.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--4_qn4aa5--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/14vpqzmqpfehciszazts.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<h3>Step 1: Create Domain<\/h3>\n\n\n\n<ul><li>On the Domain section click on Actions and then click on Create Cogniro domain<\/li><li>Enter a unique domain prefix<\/li><li>Click Create Cognito domain<\/li><\/ul>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--J77sW3Eb--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/z6eipb86s8bobrqe1mgg.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--J77sW3Eb--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/z6eipb86s8bobrqe1mgg.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--UmMlfDId--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/pzwiexx7ox1p60uik327.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--UmMlfDId--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/pzwiexx7ox1p60uik327.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<h3>Step 2: Create Resource server<\/h3>\n\n\n\n<ul><li>Click Create resource server<\/li><li>Configure the resource server name and identifier<\/li><li>Create custom scopes for your application to use when authenticating<\/li><li>Click create resource server<\/li><\/ul>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--4PNehDky--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/q3a54busbwym99dttnhv.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--4PNehDky--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/q3a54busbwym99dttnhv.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--oZg8LWxK--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/lbxls42vt70ydxq81vcc.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--oZg8LWxK--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/lbxls42vt70ydxq81vcc.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<h3>Step 3: Configure client application<\/h3>\n\n\n\n<ul><li>Select the app client you created<\/li><li>Under Hosted UI click edit<\/li><li>Under Hosted sign-up and sign-in pages select the identity provider cognito user pool<\/li><li>Select Client Credentials OAuth 2.0 Grant type<\/li><li>Select the custom scope you created and want to assign to the application<\/li><li>Click Save changes<\/li><\/ul>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--7qUPho6x--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/zydmkutei884mlb94dgc.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--7qUPho6x--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/zydmkutei884mlb94dgc.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--oRkwiv_j--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/e7943pkfdtkmq9g6ajzy.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--oRkwiv_j--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/e7943pkfdtkmq9g6ajzy.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--ZDSy5UcX--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/ssk8d6bdabob5b2jkgwi.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--ZDSy5UcX--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/ssk8d6bdabob5b2jkgwi.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<h2>Create Weather API<\/h2>\n\n\n\n<h3>Step 1: Create API<\/h3>\n\n\n\n<p>Create a API project if you don\u2019t have one<\/p>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--egnbBj76--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/24eegflzlf0ey9t2z4v7.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--egnbBj76--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/24eegflzlf0ey9t2z4v7.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--drojt5ns--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/6o86nq06uilbmi6rzw4o.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--drojt5ns--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/6o86nq06uilbmi6rzw4o.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--YhHO_N8a--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/f4hve021n5sz0h3ikbzf.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--YhHO_N8a--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/f4hve021n5sz0h3ikbzf.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<h3>Step 2: Add NuGet packages<\/h3>\n\n\n\n<p>Add the following NuGet packages:<\/p>\n\n\n\n<ul><li><a href=\"https:\/\/www.nuget.org\/packages\/Amazon.AspNetCore.Identity.Cognito\/\">https:\/\/www.nuget.org\/packages\/Amazon.AspNetCore.Identity.Cognito\/<\/a><\/li><li><a href=\"https:\/\/www.nuget.org\/packages\/Microsoft.AspNetCore.Authentication.JwtBearer\/6.0.5\">https:\/\/www.nuget.org\/packages\/Microsoft.AspNetCore.Authentication.JwtBearer<\/a>\/<\/li><\/ul>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--HkHjZ58b--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/9pn0hzom790oswoztvw1.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--HkHjZ58b--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/9pn0hzom790oswoztvw1.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--sMweL_au--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/gisbzfuru9yg4eq9ppe3.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--sMweL_au--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/gisbzfuru9yg4eq9ppe3.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<h3>Step 3: Setup auth in Program.cs<\/h3>\n\n\n\n<p>Add this block of code to the Program.cs under the builder.<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>builder.Services.AddCognitoIdentity();\n\nbuilder.Services.AddAuthentication(options =&gt;\n{\n    options.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme;\n    options.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme;\n})\n.AddJwtBearer(options =&gt;\n{\n    options.Authority = builder.Configuration&#91;\"AWSCognito:Authority\"];\n    options.TokenValidationParameters = new TokenValidationParameters\n    {\n        ValidateIssuerSigningKey = true,\n                ValidateAudience = false\n    };\n});\n<\/code><\/pre>\n\n\n\n<p>Add the following under app.UseHttpsRedirection(); in Program.cs<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>app.UseAuthentication();\napp.UseAuthorization();\n<\/code><\/pre>\n\n\n\n<p>Add the following using&#8217;s to the Program.cs<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>using Microsoft.AspNetCore.Authentication.JwtBearer;\nusing Microsoft.IdentityModel.Tokens;\n<\/code><\/pre>\n\n\n\n<p>Your Program.cs will end up looking like this when you\u2019re done.<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>using Microsoft.AspNetCore.Authentication.JwtBearer;\nusing Microsoft.IdentityModel.Tokens;\n\nvar builder = WebApplication.CreateBuilder(args);\n\n\/\/ Add services to the container.\n\nbuilder.Services.AddControllers();\n\/\/ Learn more about configuring Swagger\/OpenAPI at https:\/\/aka.ms\/aspnetcore\/swashbuckle\nbuilder.Services.AddEndpointsApiExplorer();\nbuilder.Services.AddSwaggerGen();\n\nbuilder.Services.AddCognitoIdentity();\n\nbuilder.Services.AddAuthentication(options =&gt;\n{\n    options.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme;\n    options.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme;\n})\n.AddJwtBearer(options =&gt;\n{\n    options.Authority = builder.Configuration&#91;\"AWSCognito:Authority\"];\n    options.TokenValidationParameters = new TokenValidationParameters\n    {\n        ValidateIssuerSigningKey = true,\n        ValidateAudience = false\n    };\n});\n\nvar app = builder.Build();\n\n\/\/ Configure the HTTP request pipeline.\nif (app.Environment.IsDevelopment())\n{\n    app.UseSwagger();\n    app.UseSwaggerUI();\n}\n\napp.UseHttpsRedirection();\n\napp.UseAuthentication();\napp.UseAuthorization();\n\napp.MapControllers();\n\napp.Run();\n<\/code><\/pre>\n\n\n\n<h3>Step 4: Setup configuration file<\/h3>\n\n\n\n<p>Add this section to the appsettings.Development.json file<\/p>\n\n\n\n<p>This URL for the authority is made up of the following<\/p>\n\n\n\n<figure class=\"wp-block-embed\"><div class=\"wp-block-embed__wrapper\">\nhttps:\/\/cognito-idp.{region}.amazonaws.com\/{userpoolid}\n<\/div><\/figure>\n\n\n\n<pre class=\"wp-block-code\"><code>\n  \"AWSCognito\": {\n    \"Authority\": \"https:\/\/cognito-idp\/.{region}.amazonaws.com\/{userpoolid}\"\n  }\n<\/code><\/pre>\n\n\n\n<p>You can find the user pool id in AWS on the Amazon Cognito page under user pools<\/p>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--ALOU9qFH--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/doame0m5l1fo0hdx3ag1.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--ALOU9qFH--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/doame0m5l1fo0hdx3ag1.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<h3>Step 5: Add authorize attribute to GetWeatherForecast endpoint<\/h3>\n\n\n\n<p>In the WeatherForecastController.cs add the Authorize attribute to the GetWeatherForecast endpoint and add Microsoft.AspNetCore.Authorization to the usings.<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>using Microsoft.AspNetCore.Authorization;\nusing Microsoft.AspNetCore.Mvc;\n\nnamespace AWSCognitoWeatherAPI.Controllers\n{\n    &#91;ApiController]\n    &#91;Route(\"&#91;controller]\")]\n    public class WeatherForecastController : ControllerBase\n    {\n        private static readonly string&#91;] Summaries = new&#91;]\n        {\n        \"Freezing\", \"Bracing\", \"Chilly\", \"Cool\", \"Mild\", \"Warm\", \"Balmy\", \"Hot\", \"Sweltering\", \"Scorching\"\n    };\n\n        private readonly ILogger&lt;WeatherForecastController&gt; _logger;\n\n        public WeatherForecastController(ILogger&lt;WeatherForecastController&gt; logger)\n        {\n            _logger = logger;\n        }\n\n        &#91;Authorize]\n        &#91;HttpGet(Name = \"GetWeatherForecast\")]\n        public IEnumerable&lt;WeatherForecast&gt; Get()\n        {\n            return Enumerable.Range(1, 5).Select(index =&gt; new WeatherForecast\n            {\n                Date = DateTime.Now.AddDays(index),\n                TemperatureC = Random.Shared.Next(-20, 55),\n                Summary = Summaries&#91;Random.Shared.Next(Summaries.Length)]\n            })\n            .ToArray();\n        }\n    }\n}\n<\/code><\/pre>\n\n\n\n<h2>Call the Weather Forecast API using Postman<\/h2>\n\n\n\n<h3>Step 1: Create new collection<\/h3>\n\n\n\n<ul><li>Create a new collection for the API<\/li><li>Add new request to the collection for the weather forcast endpoint (<a href=\"https:\/\/localhost:7214\/WeatherForecast\">https:\/\/localhost:7214\/WeatherForecast<\/a>)<\/li><\/ul>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--I7rrYxVr--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/aeljxi65815zts9dpo9y.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--I7rrYxVr--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/aeljxi65815zts9dpo9y.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--RUa3r764--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/9kzrwz267z4kcvxpyi0s.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--RUa3r764--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/9kzrwz267z4kcvxpyi0s.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<h3>Step 2: Setup Collection Auth<\/h3>\n\n\n\n<ul><li>Click on the Weather Forcast API collection and navigate to the Authorization tab<\/li><li>From the Type dropdown select OAuth 2.0<\/li><li>In the Configure New Token Section give the token a name<\/li><li>In Grant Type dropdown select Client Credentials<\/li><li>In the app integration section of the user pool in AWS get the domain url<\/li><li>Add the domain to the Access Token URL section in postman and append it with \/oauth2\/token<\/li><li>Get the client id from the client app in AWS<\/li><li>Get the client secret from the client app in AWS<\/li><li>Get the custom scope form the Hosted UI<\/li><li>Add the clientid, client secret and scope in postman<\/li><li>Click get new access token<\/li><li>Click use token on the pop-up<\/li><li>On the Weather Forecast request under the Authorization tab ensure the Type is set to Inherit auth from parent.<\/li><\/ul>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--_BH0ChxL--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/nai6tefg7742n0907eid.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--_BH0ChxL--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/nai6tefg7742n0907eid.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--5JiwmeeK--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/mfjnw2yp68a4jpl9he95.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--5JiwmeeK--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/mfjnw2yp68a4jpl9he95.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--xHM_iHg6--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/hjc9ofghcbmsj3wjahsg.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--xHM_iHg6--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/hjc9ofghcbmsj3wjahsg.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--laaOqwFI--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/cbebxmgccvb2xuuf3x93.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--laaOqwFI--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/cbebxmgccvb2xuuf3x93.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--6HA2oIFj--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/cm262okes8xeqf6fyt1a.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--6HA2oIFj--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/cm262okes8xeqf6fyt1a.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--K50Jcyqf--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/0ciz4i96b5gtds9ezbsu.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--K50Jcyqf--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/0ciz4i96b5gtds9ezbsu.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--q1JZ2Gvi--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/pflduqxem8e33ntijvvt.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--q1JZ2Gvi--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/pflduqxem8e33ntijvvt.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<h3>Step 3: Call the Weather API<\/h3>\n\n\n\n<p>Click send on the weather forecast request to get the response on the API<\/p>\n\n\n\n<figure class=\"wp-block-image\"><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--g7THxwAz--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/zlxb3ddb5ojwt4h4v1sv.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--g7THxwAz--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/zlxb3ddb5ojwt4h4v1sv.png\" alt=\"Image description\"\/><\/a><\/figure>\n\n\n\n<p>It\u2019s as easy as that !\ud83c\udf89<\/p>\n","protected":false},"excerpt":{"rendered":"<p>AWS Cognito User pool creation Navigate to the AWS Cognito service page Click on create user pool Step 1:&nbsp;Configure sign-in experience Select Email and click next Step 2:&nbsp;Configure security requirements Under password policy select cognito defaults Under Multi-factor authentication select No MFA Under User account recovery select Enable self-service account recovery and then Email Only &hellip;<\/p>\n<p class=\"read-more\"> <a class=\"\" href=\"https:\/\/vinayaroratech.com\/dotnet\/aws-cognito-client-credentials-flow-net-6\/\"> <span class=\"screen-reader-text\">AWS Cognito \u2014 Client credentials flow .NET 6<\/span> Read More &raquo;<\/a><\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[1,5,79,13],"tags":[76,81,84,82,59,83],"_links":{"self":[{"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/posts\/919"}],"collection":[{"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/comments?post=919"}],"version-history":[{"count":2,"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/posts\/919\/revisions"}],"predecessor-version":[{"id":921,"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/posts\/919\/revisions\/921"}],"wp:attachment":[{"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/media?parent=919"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/categories?post=919"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/vinayaroratech.com\/wp-json\/wp\/v2\/tags?post=919"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}